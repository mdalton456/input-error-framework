/*!
 * angular-directive-boilerplate
 * https://github.com/mohsen1/angular-directive-boilerplate
 * Version: 0.0.8 - 2016-02-04T16:14:32.938Z
 * License: MIT
 */
"use strict";function validateMinDate(e,r){return e>r}function validateMaxDate(e,r){return r>e}angular.module("mdalton456.mdd-input-error-framework",["po.alerts","po.input","po.modals"]),angular.module("po.alerts",[]).directive("poAlertNotification",function(){return{templateUrl:"src/alerts/templates/error-alert.html",restrict:"EA",scope:{error:"="}}}).directive("poInfoNotification",function(){return{templateUrl:"src/alerts/templates/info-alert.html",restrict:"EA",scope:{info:"="}}}),angular.module("po.input",[]).factory("PoInputRefData",function(){return function(){var e={requiredEmail:{attributes:{"ng-required":"'true'",type:"email"},"default":{poLabel:"Email Address",placeholder:"Email Address"},defaultErrors:[{required:{type:"Alert",message:"Please enter an email"}}]},ukPhone:{attributes:{"ng-required":"'true'","ng-pattern":/^((\(?0\d{4}\)?\s?\d{3}\s?\d{3})|(\(?0\d{3}\)?\s?\d{3}\s?\d{4})|(\(?0\d{2}\)?\s?\d{4}\s?\d{4}))(\s?\#(\d{4}|\d{3}))?$/},"default":{poLabel:"Contact Number",placeholder:"Contact Number"},defaultErrors:[{required:{type:"Alert",message:"Please enter a Phone Number"}},{pattern:{type:"Alert",message:"Please enter Phone number in a valid format"}}]},currency:{attributes:{"ng-required":"'true'","ng-pattern":/^[0-9]{1,6}(\.[0-9]{2})?$/,maxlength:"9","class":"currency-input"},"default":{poLabel:"Currency Box",placeholder:"000.00"},defaultErrors:[{required:{type:"Alert",message:"Please enter a value for currency"}},{pattern:{type:"Alert",message:"Please enter a currency in a valid format"}}]},time:{attributes:{"ng-required":"'true'","ng-pattern":/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/,"class":"time-input"},"default":{poLabel:"Time",placeholder:"00:00"},defaultErrors:[{required:{type:"Alert",message:"Please enter a time"}},{pattern:{type:"Alert",message:"Please enter the time in a valid format"}}]},addressLine1:{attributes:{"ng-pattern":/^([A-Z]|[a-z]|[0-9])\w+|[0-9]$/},"default":{poLabel:"Address Line 1",placeholder:"Address Line 1"},defaultErrors:[{pattern:{type:"Alert",message:"Please enter the first line of the address in a valid format"}}]},addressLine2:{attributes:{"ng-pattern":/^$|([A-Z]|[a-z])\w+/},"default":{poLabel:"Address Line 2 (Optional)",placeholder:"Address Line 2"},defaultErrors:[{pattern:{type:"Alert",message:"Please enter the second line of the address in a valid format"}}]},addressLine3:{attributes:{"ng-pattern":/^$|([A-Z]|[a-z])\w+/},"default":{poLabel:"Address Line 3",placeholder:"Address Line 3"},defaultErrors:[{pattern:{type:"Alert",message:"Please enter the third line of the address in a valid format"}}]},city:{attributes:{"ng-pattern":/([A-Z]|[a-z])\w+/},"default":{poLabel:"Town/City",placeholder:"Town/City"},defaultErrors:[{pattern:{type:"Alert",message:"Please enter the city in a valid format"}}]},county:{attributes:{"ng-pattern":/([A-Z]|[a-z])\w+/,"class":"po-search-input-text"},"default":{poLabel:"County",placeholder:"County"},defaultErrors:[{pattern:{type:"Alert",message:"Please enter the county in a valid format"}}]},country:{attributes:{"ng-pattern":/([A-Z]|[a-z]){2,}/,"class":"po-search-input-text"},"default":{poLabel:"Country of Origin",placeholder:"Country of Origin"},defaultErrors:[{pattern:{type:"Alert",message:"Please enter the country in a valid format"}}]},ukPostcodeOptional:{attributes:{"ng-pattern":/^(|([A-Z]{1,2}[0-9][0-9A-Z]?\s?[0-9][A-Z]{2}))$/i},"default":{poLabel:"Postcode",placeholder:"Postcode"},defaultErrors:[{pattern:{type:"Alert",message:"Please enter the Postcode in a valid format"}}]},ukPostcode:{attributes:{"ng-required":"'true'","ng-pattern":/^[A-Z]{1,2}[0-9][0-9A-Z]?\s?[0-9][A-Z]{2}$/i},"default":{poLabel:"Postcode",placeholder:"Postcode"},defaultErrors:[{required:{type:"Alert",message:"Please enter a Postcode"}},{pattern:{type:"Alert",message:"Please enter Postcode in a valid format"}}]},stringHardCodedNgpattern:{attributes:{"ng-required":"'true'","ng-pattern":"/^[0-9]+$/"},"default":{poLabel:"def: hard coded string ng pattern",placeholder:"def: hard coded string ng pattern"}},regexHardCodedNgpattern:{attributes:{"ng-required":"'true'","ng-pattern":/^[0-9]{3}$/},"default":{poLabel:"def: hard coded regex ngPattern",placeholder:"def: hard coded regex ngPattern"}},minlength:{attributes:{"ng-minlength":"3","ng-required":"'true'"},"default":{poLabel:"def: minlength label",placeholder:"def: minlength placeholder"}},validStyle:{attributes:{"ng-required":"'true'"},"default":{poLabel:"def: example valid style label",placeholder:"def: example valid style placeholder style"}},"default":{},failureTypes:[]};for(var r in e)if("failureTypes"!==r&&(e[r].type=r),e[r].defaultErrors)for(var t=0;t<e[r].defaultErrors.length;t++){for(var a=Object.keys(e[r].defaultErrors[t])[0],o=!1,n=0;n<e.failureTypes.length;n++)if(a===e.failureTypes[n]){o=!0;break}o===!1&&e.failureTypes.push(a)}return e}}),angular.module("po.input").directive("poInput",function(e,r){function t(){var t,a,o,n,s,i=[],l={};return{withScope:function(e){return n=e,this},ofType:function(e){s=new r;var t=s[e];return!t&&e&&console.warn("input type: "+e+" not found, using default."),t&&e?(o=e,a=t):(o="default",a=s["default"]),this},withBaseInputEl:function(e){return t=e,this},withAttr:function(e,r){return l[e]=r,this},withoutAttr:function(e){return i.push(e),this},withDefaultPlaceholder:function(e){return this.setDefaultAttr("placeholder",e)},setDefaultAttr:function(e,r){return this.withAttr(e,t.attr(e)||r)},withRequired:function(){return this.withAttr("ng-required","'true'")},withPattern:function(e){return this.withAttr("ng-pattern",e)},addClass:function(e){return t.addClass(e),this},buildType:function(){var e={};angular.copy(a.attributes,e),e=e||{},e["class"]&&(e["class"].split(/\s+/).forEach(this.addClass),n.hadClasses=(n&&n.hadClasses&&n.hadClasses+" "||"")+e["class"],delete e["class"]);for(var r in e)this.withAttr(r,e[r]);return"default"!==o&&(n.ngRequired=e["ng-required"]||!1),this.withDefaultPlaceholder(a["default"]&&a["default"].placeholder)},compile:function(){if(!t)throw new Error("baseInputEl not provided");n.ngModelString||console.error("input directives and po-input must use ng-model"),n.name=n.name||n.ngModelString,n.hadClasses=n["class"]&&n["class"].split(/\s+/).join(" ").trim(),this.buildType().withoutAttr("po-input").addClass("po-input").withAttr("po-input-processed",a.type||"").setDefaultAttr("name",n.ngModelString);for(var r in l)t.attr(r,l[r]);if(i.forEach(function(e){t.removeAttr(e)}),n.errors=a.defaultErrors,n.errorJustAdded=[],n.errors)for(var o=0;o<n.errors.length;o++)for(var d=0;d<s.failureTypes.length;d++){var p=s.failureTypes[d];Object.keys(n.errors[o])[0]===p&&n[p+"ErrorObj"]&&(n.errors[o][p]=n[p+"ErrorObj"])}t.wrap('<po-input-transclude po-input-type="{{poInput}}" po-had-classes="{{hadClasses}}" name="{{name || nameDefault}}" po-label="poLabel" po-errors="errors" po-error-just-added="errorJustAdded" po-required="ngRequired"></po-input-transclude>'),n.poLabel=n.poLabel||a["default"]&&a["default"].poLabel,e(t.parent())(n)}}}return{terminal:!0,priority:1010,scope:{name:"@",poLabel:"=",poInput:"@",ngModelString:"@ngModel","class":"@",ngRequired:"=",requiredErrorObj:"=",patternErrorObj:"="},link:function(e,r){var a=e.$parent.$new();a.poLabel=e.poLabel,a.name=e.name,a.ngModelString=e.ngModelString,a["class"]=e["class"],a.ngRequired=e.ngRequired||!1,a.poInput=e.poInput,a.requiredErrorObj=e.requiredErrorObj,a.patternErrorObj=e.patternErrorObj,t().withBaseInputEl(r).withScope(a).ofType(e.poInput).compile()}}}).directive("poInputTransclude",["poErrorHandler",function(e){return{transclude:!0,scope:{poLabel:"=",inputName:"@name",poHadClasses:"@",poRequired:"=",poErrors:"=",poRequiredErrorObj:"=",poPatternErrorObj:"=",poErrorJustAdded:"="},templateUrl:"input/templates/input-wrapper-template.html",require:"^form",controller:"PoInputValidatorCtrl",link:function(r,t,a,o){r.form=o,r.inputName=r.inputName||r.defaultInputName,r.input=r.form&&r.form[r.inputName],r.$watchGroup([function(){return r.input.$valid},function(){return r.input.$touched},function(){return Object.keys(r.input.$error)[0]}],function(){if(r.poErrors)if(r.input.$valid===!1&&r.input.$touched===!0){if(1===r.poErrorJustAdded.length)for(var t=0;t<e.length;t++){var a=e.getErrorArray()[t],o=r.poErrorJustAdded[0];if(a.type===o.type&&a.message===o.message&&a.timestamp===o.timestamp){e.removeError(t),r.poErrorJustAdded=[];break}}for(var n=Object.keys(r.input.$error)[0],s=0;s<r.poErrors.length;s++)if(Object.keys(r.poErrors[s])[0]===n){var i=r.poErrors[s],l=i[n];""===l.type&&""===l.message||(e.addError(l.type,l.message),r.poErrorJustAdded.push(e.getMostRecentError()));break}}else if(r.input.$valid===!0&&r.poErrorJustAdded.length>0)for(var d=0;d<e.length;d++){var p=e.getErrorArray()[d],u=r.poErrorJustAdded[0];if(p.type===u.type&&p.message===u.message&&p.timestamp===u.timestamp){e.removeError(d),r.poErrorJustAdded=[];break}}})}}}]).controller("PoInputValidatorCtrl",function(e){function r(e){return Object.getOwnPropertyNames(e.$validators).length>0}e.displayValid=function(){return e.input&&e.input.$valid&&e.poRequired&&!0||!1},e.displayInvalid=function(){return e.input&&e.input.$invalid&&e.input.$touched&&(e.poRequired||r(e.input))&&!0||!1}});var openFuncNameErm="openErm";angular.module("po.modals",[]).directive("poErrorModal",function(e){var r="openErm";return{controller:"ErmModalCtrl",scope:{title:"=",errorList:"="},transclude:!0,restrict:"A",link:function(t,a,o){a.removeAttr("po-error-modal");var n;n=o.before?o.ngClick?r+"(); "+o.ngClick:r+"()":o.ngClick?o.ngClick+"; "+r+"()":r+"()",a.attr("ng-click",n),e(a[0])(t)}}}).directive("poAlertPanel",["poErrorHandler",function(e){return{controller:"ErmModalCtrl",restrict:"EA",scope:{},template:'<div ng-include="getTemplateUrl()" class="generic-notif-container" ng-click="openErm()"></div>',transclude:!0,link:function(r){r.$watch(e.getMostRecentError,function(t){r.getTemplateUrl=function(){return r.mostRecentError=t,"Alert"===t.type?(r.error=t.message,"panel/templates/error-alert.html"):"Info"===t.type?(r.info=t.message,"panel/templates/info-alert.html"):""},r.messageOverflow=e.getMessageOverflow()},!0),r.$watch(e.getNumNotifications,function(e){r.numNotifications=e})}}}]).controller("ErmModalCtrl",["poErrorHandler","$scope","$modal",function(e,r,t){r.errorModal={title:"Notifications",errorList:[]},r.mostRecentError=e.getMostRecentError(),r.messageOverflow=e.getMessageOverflow(),r.numNotifications=e.getNumNotifications(),r.errorModal.errorList=e,r[openFuncNameErm]=function(){r.$parent.erm={checkbox:!1},t.open({animation:!1,templateUrl:"modal/templates/error-modal.html",scope:r,controller:"ErmModalInstanceCtrl",size:"lg",backdrop:"static"})}}]).controller("ErmModalInstanceCtrl",["poErrorHandler","$scope","$modalInstance",function(e,r,t){r.close=function(){t.close(!0)},r.closeError=function(t){var a=r.errorModal.errorList.indexOf(t);1===r.errorModal.errorList.length&&(r.errorModal.errorList.splice(a,1),e.generateMostRecentError(),r.close()),r.errorModal.errorList.splice(a,1),e.generateMostRecentError()}}]).factory("poErrorHandler",function(){function e(e,r){return"Alert"===e.type&&"Info"===r.type?-1:"Info"===e.type&&"Alert"===r.type?1:e.timestamp>r.timestamp?-1:e.timestamp<r.timestamp?1:0}var r=[],t={type:"",message:"",timestamp:""},a=!1,o=70;return r.addError=function(t,a){var o=Date.now();r.push({type:t,message:a,timestamp:o}),r.sort(e),r.generateMostRecentError()},r.removeError=function(e){r.length>=e&&r.splice(e,1),r.generateMostRecentError()},r.clearArray=function(){r=[]},r.setCharacterLimit=function(e){o=e},r.generateMostRecentError=function(){null!=r[0]?(r[0].message.length>o?(t.message=r[0].message.slice(0,o-7)+"...",a=!0):(t.message=r[0].message,a=!1),t.type=r[0].type,t.timestamp=r[0].timestamp):t={type:"",message:"",timestamp:""}},r.getMessageOverflow=function(){return a},r.getMostRecentError=function(){return t},r.getNumNotifications=function(){return r.length},r.getErrorArray=function(){return r},r}),angular.module("mdalton456.mdd-input-error-framework").run(["$templateCache",function(e){e.put("mdd-input-error-framework.html",'<div class="mdd-input-error-framework"><div>The value is {{getValue()}}</div><button ng-click="increment()">+</button></div>'),e.put("input/templates/input-wrapper-template.html",'<div><div class="po-label">{{poLabel || poLabelDefault}}</div><div class="po-relative-input {{inputName}}" ng-class="{\'po-valid\':displayValid(), \'po-invalid\': displayInvalid()}" po-had-classes="{{poHadClasses}}"><ng-transclude></ng-transclude><div class="po-input-validate-icon-relative"><span class="po-input-validate-icon"></span></div></div></div>'),e.put("modal/templates/error-modal.html",'<div class="erm-modal container-fluid"><div class="row"><div class="col-xs-12 banner"><a class="navbar-brand po-cross-link" href="" ng-click="close()"><img class="po-cross" src="/bower_components/po-ui-component/assets/cross.png" alt="close"></a><h1 ng-bind="errorModal.title"></h1></div></div><div class="row"><div class="error-container col-xs-12"><div ng-repeat="error in errorModal.errorList" class="notif-row-background"><div class="error-row row" ng-class="error.type+\'-row\'"><div class="error-value-col"><p class="error-value no-margin">{{error.message}}</p></div><div class="po-cross-link" id="{{\'error\'+$index}}"><a ng-if="error.type!=\'Alert\'" href="" ng-click="closeError(error)"><img class="po-cross" src="/bower_components/po-ui-component/assets/black-cross.png" alt="close"></a></div></div></div></div></div></div>'),e.put("panel/templates/error-alert.html",'<div class="po-alert error" ng-show="error"><div class="alert-icon"><img src="/bower_components/po-ui-component/assets/error.png" class="img-responsive"></div><div class="alert-text"><p>{{error}}</p></div><div ng-show="numNotifications>1" class="error-notif-num">{{numNotifications}}</div><div ng-show="messageOverflow" class="error-more-icon">more</div></div>'),e.put("panel/templates/info-alert.html",'<div class="po-alert info" ng-show="info"><div class="alert-icon"><img src="/bower_components/po-ui-component/assets/info.png" class="img-responsive"></div><div class="alert-text"><p>{{info}}</p></div><div ng-show="numNotifications>1" class="info-notif-num">{{numNotifications}}</div><div ng-show="messageOverflow" class="info-more-icon">more</div></div>')}]);